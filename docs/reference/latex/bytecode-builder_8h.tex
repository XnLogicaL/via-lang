\doxysection{src/codegen/bytecode-\/builder.h File Reference}
\hypertarget{bytecode-builder_8h}{}\label{bytecode-builder_8h}\index{src/codegen/bytecode-\/builder.h@{src/codegen/bytecode-\/builder.h}}


Declares the Bytecode\+Builder class along with utility.  


{\ttfamily \#include "{}common.\+h"{}}\newline
{\ttfamily \#include $<$parse/ast.\+h$>$}\newline
{\ttfamily \#include $<$codegen/visitor.\+h$>$}\newline
{\ttfamily \#include $<$codegen/types.\+h$>$}\newline
{\ttfamily \#include $<$interpreter/instruction.\+h$>$}\newline
{\ttfamily \#include $<$interpreter/state.\+h$>$}\newline
Include dependency graph for bytecode-\/builder.h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{structvia_1_1compiler__util_1_1OperandsArray}{via\+::compiler\+\_\+util\+::\+Operands\+Array$<$ T, Size, Default $>$}}
\begin{DoxyCompactList}\small\item\em std\+::array wrapper with custom initialization support \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classvia_1_1BytecodeBuilder}{via\+::\+Bytecode\+Builder}}
\begin{DoxyCompactList}\small\item\em Builds bytecode from the abstract syntax tree found inside the translation unit context. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespacevia}{via}}
\begin{DoxyCompactList}\small\item\em All core compiler logic is within this namespace. \end{DoxyCompactList}\item 
namespace \mbox{\hyperlink{namespacecompiler__util}{compiler\+\_\+util}}
\begin{DoxyCompactList}\small\item\em Contains compiler utility functions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{bytecode-builder_8h_ab4608f18c1f176248d02055de62c9440}\label{bytecode-builder_8h_ab4608f18c1f176248d02055de62c9440} 
using {\bfseries via\+::compiler\+\_\+util\+::operands\+\_\+init\+\_\+t} = \mbox{\hyperlink{structvia_1_1compiler__util_1_1OperandsArray}{Operands\+Array}}$<$ \mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}}, 3, \mbox{\hyperlink{namespacevia_a9b3997daccb909f72d9d7d3ab8a9d619}{OPERAND\+\_\+\+INVALID}} $>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_af27fc4468b84dff327faecf6c2b62095}{via\+::compiler\+\_\+util\+::compiler\+\_\+error}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, size\+\_\+t begin, size\+\_\+t end, const std\+::string \&message)
\begin{DoxyCompactList}\small\item\em Emits a compiler error with a highlighted source range. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_aed582c4bba4b41805973cecc28813a78}{via\+::compiler\+\_\+util\+::compiler\+\_\+error}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, const \mbox{\hyperlink{structvia_1_1Token}{Token}} \&token, const std\+::string \&message)
\begin{DoxyCompactList}\small\item\em Emits a compiler error associated with a specific token. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_a69b65c01c8510d846042acdaf8766a04}{via\+::compiler\+\_\+util\+::compiler\+\_\+error}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, const std\+::string \&message)
\begin{DoxyCompactList}\small\item\em Emits a general compiler error without location info. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_adf42809064fd8620bc70f1076d94f8b7}{via\+::compiler\+\_\+util\+::compiler\+\_\+warning}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, size\+\_\+t begin, size\+\_\+t end, const std\+::string \&)
\begin{DoxyCompactList}\small\item\em Emits a compiler warning with a highlighted source range. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_a3f6826ada44a96d6ca02aa999a66643a}{via\+::compiler\+\_\+util\+::compiler\+\_\+warning}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, const \mbox{\hyperlink{structvia_1_1Token}{Token}} \&, const std\+::string \&)
\begin{DoxyCompactList}\small\item\em Emits a compiler warning associated with a specific token. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_ae25646b0470fe311a93d2fae35030c51}{via\+::compiler\+\_\+util\+::compiler\+\_\+warning}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, const std\+::string \&)
\begin{DoxyCompactList}\small\item\em Emits a general compiler info without location info. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_a73fd43f361196186f7beec71629c8f1e}{via\+::compiler\+\_\+util\+::compiler\+\_\+info}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, size\+\_\+t begin, size\+\_\+t end, const std\+::string \&)
\begin{DoxyCompactList}\small\item\em Emits a compiler info with a highlighted source range. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_aa5b5e4c9bbe912d67f4088ec6e237fc2}{via\+::compiler\+\_\+util\+::compiler\+\_\+info}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, const \mbox{\hyperlink{structvia_1_1Token}{Token}} \&, const std\+::string \&)
\begin{DoxyCompactList}\small\item\em Emits a compiler info associated with a specific token. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_adb384520f2a54f15e7dcebc5f9885a44}{via\+::compiler\+\_\+util\+::compiler\+\_\+info}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, const std\+::string \&)
\begin{DoxyCompactList}\small\item\em Emits a general compiler info without location info. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_ad6a1180fc963b94b13e5513905590593}{via\+::compiler\+\_\+util\+::compiler\+\_\+output\+\_\+end}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx)
\begin{DoxyCompactList}\small\item\em Signifies the end of compiler output. Currently does nothing. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structvia_1_1StackFunction}{Stack\+Function}} \& \mbox{\hyperlink{bytecode-builder_8cpp_a8da7ee9839b6bf66721300862d71a126}{via\+::compiler\+\_\+util\+::get\+\_\+current\+\_\+closure}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx)
\begin{DoxyCompactList}\small\item\em Returns the top-\/most closure on the function stack. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structvia_1_1Value}{Value}} \mbox{\hyperlink{bytecode-builder_8cpp_a405bea795e2517d90b3f2155bbb7610a}{via\+::compiler\+\_\+util\+::construct\+\_\+constant}} (\mbox{\hyperlink{structvia_1_1LitExprNode}{Lit\+Expr\+Node}} \&literal\+\_\+node)
\begin{DoxyCompactList}\small\item\em Constructs a constant value from the given literal expression node. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structvia_1_1LitExprNode}{Lit\+Expr\+Node}} \mbox{\hyperlink{bytecode-builder_8cpp_ac9703f204266ee5ff6611665067a580c}{via\+::compiler\+\_\+util\+::fold\+\_\+constant}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, \mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}expr, size\+\_\+t fold\+\_\+depth)
\begin{DoxyCompactList}\small\item\em Folds an expression into a constant if possible. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}} \mbox{\hyperlink{bytecode-builder_8cpp_a821ac9cae97689669d2c96e6d1411d28}{via\+::compiler\+\_\+util\+::push\+\_\+constant}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, \mbox{\hyperlink{structvia_1_1Value}{Value}} \&\&constant)
\begin{DoxyCompactList}\small\item\em Pushes a constant onto the constant table. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{bytecode-builder_8cpp_ae336781c36f310148a11623a10fd6761}{via\+::compiler\+\_\+util\+::resolve\+\_\+lvalue}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, \mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}lvalue, \mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}} dst)
\begin{DoxyCompactList}\small\item\em Resolves the given lvalue and loads the result into the given register. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{bytecode-builder_8cpp_aa83c6cf545d9a79002c7088f35f7ec31}{via\+::compiler\+\_\+util\+::resolve\+\_\+rvalue}} (\mbox{\hyperlink{classvia_1_1NodeVisitorBase}{Node\+Visitor\+Base}} \texorpdfstring{$\ast$}{*}visitor, \mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}rvalue, \mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}} dst)
\begin{DoxyCompactList}\small\item\em Resolves the given rvalue and loads the result into the given register. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{bytecode-builder_8cpp_a69030828d339302cc913315f7a911490}{via\+::compiler\+\_\+util\+::bind\+\_\+lvalue}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, \mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}lvalue, \mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}} src)
\begin{DoxyCompactList}\small\item\em Binds the value in the given register to the given lvalue. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structvia_1_1TypeNodeBase}{Type\+Node\+Base}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{bytecode-builder_8cpp_add415b7aca65d8e5f933f440968a0533}{via\+::compiler\+\_\+util\+::resolve\+\_\+type}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, \mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}expr)
\begin{DoxyCompactList}\small\item\em Resolves the type of the given expression. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_a7da6a7e98da441aeb6cce0b329a15cb1}{via\+::compiler\+\_\+util\+::bytecode\+\_\+emit}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, \mbox{\hyperlink{namespacevia_ac8974a71c8a4b5a87cbb4ea665ebfd62}{Opcode}} opcode=\mbox{\hyperlink{namespacevia_ac8974a71c8a4b5a87cbb4ea665ebfd62a1a004f5abe2b334db21328be1ea6b593}{Opcode\+::\+NOP}}, \mbox{\hyperlink{structvia_1_1compiler__util_1_1OperandsArray}{operands\+\_\+init\+\_\+t}} \&\&operands=\{\}, std\+::string comment="{}"{})
\begin{DoxyCompactList}\small\item\em Emits a bytecode pair with the given data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8cpp_a7bce3ee1324627943bb8a7dae03f82ce}{via\+::compiler\+\_\+util\+::close\+\_\+defer\+\_\+statements}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, \mbox{\hyperlink{classvia_1_1NodeVisitorBase}{Node\+Visitor\+Base}} \texorpdfstring{$\ast$}{*}visitor)
\begin{DoxyCompactList}\small\item\em Closes and emits all defer statements found inside the given visitor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}} \mbox{\hyperlink{bytecode-builder_8h_a1a769bd32cb52620f99848cfe93fae0c}{via\+::compiler\+\_\+util\+::alloc\+\_\+register}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx)
\begin{DoxyCompactList}\small\item\em Allocates a new register. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bytecode-builder_8h_af77668addbda8eb247ec34282720901c}{via\+::compiler\+\_\+util\+::free\+\_\+register}} (\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&ctx, \mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}} reg)
\begin{DoxyCompactList}\small\item\em Fress the given registers that was previously allocated with {\ttfamily alloc\+\_\+register} \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Declares the Bytecode\+Builder class along with utility. 



\doxysubsection{Function Documentation}
\Hypertarget{bytecode-builder_8h_a1a769bd32cb52620f99848cfe93fae0c}\label{bytecode-builder_8h_a1a769bd32cb52620f99848cfe93fae0c} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!alloc\_register@{alloc\_register}}
\index{alloc\_register@{alloc\_register}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{alloc\_register()}{alloc\_register()}}
{\footnotesize\ttfamily operand\+\_\+t via\+::compiler\+\_\+util\+::alloc\+\_\+register (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Allocates a new register. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Register id 
\end{DoxyReturn}
\Hypertarget{bytecode-builder_8cpp_a69030828d339302cc913315f7a911490}\label{bytecode-builder_8cpp_a69030828d339302cc913315f7a911490} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!bind\_lvalue@{bind\_lvalue}}
\index{bind\_lvalue@{bind\_lvalue}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{bind\_lvalue()}{bind\_lvalue()}}
{\footnotesize\ttfamily bool via\+::compiler\+\_\+util\+::bind\+\_\+lvalue (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{\mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}}]{lvalue,  }\item[{\mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}}}]{src }\end{DoxyParamCaption})}



Binds the value in the given register to the given lvalue. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em lvalue} & lvalue to bind to \\
\hline
{\em src} & Register to the get the value to bind \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Fail status 
\end{DoxyReturn}
\Hypertarget{bytecode-builder_8cpp_a7da6a7e98da441aeb6cce0b329a15cb1}\label{bytecode-builder_8cpp_a7da6a7e98da441aeb6cce0b329a15cb1} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!bytecode\_emit@{bytecode\_emit}}
\index{bytecode\_emit@{bytecode\_emit}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{bytecode\_emit()}{bytecode\_emit()}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::bytecode\+\_\+emit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{\mbox{\hyperlink{namespacevia_ac8974a71c8a4b5a87cbb4ea665ebfd62}{Opcode}}}]{opcode = {\ttfamily \mbox{\hyperlink{namespacevia_ac8974a71c8a4b5a87cbb4ea665ebfd62a1a004f5abe2b334db21328be1ea6b593}{Opcode\+::\+NOP}}},  }\item[{\mbox{\hyperlink{structvia_1_1compiler__util_1_1OperandsArray}{operands\+\_\+init\+\_\+t}} \&\&}]{operands = {\ttfamily \{\}},  }\item[{std\+::string}]{comment = {\ttfamily "{}"{}} }\end{DoxyParamCaption})}



Emits a bytecode pair with the given data. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em opcode} & Opcode of the instruction \\
\hline
{\em operands} & Initializer list for instruction operands \\
\hline
{\em comment} & A comment string \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_a7bce3ee1324627943bb8a7dae03f82ce}\label{bytecode-builder_8cpp_a7bce3ee1324627943bb8a7dae03f82ce} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!close\_defer\_statements@{close\_defer\_statements}}
\index{close\_defer\_statements@{close\_defer\_statements}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{close\_defer\_statements()}{close\_defer\_statements()}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::close\+\_\+defer\+\_\+statements (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{\mbox{\hyperlink{classvia_1_1NodeVisitorBase}{Node\+Visitor\+Base}} \texorpdfstring{$\ast$}{*}}]{visitor }\end{DoxyParamCaption})}



Closes and emits all defer statements found inside the given visitor. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em visitor} & Visitor \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_a69b65c01c8510d846042acdaf8766a04}\label{bytecode-builder_8cpp_a69b65c01c8510d846042acdaf8766a04} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_error@{compiler\_error}}
\index{compiler\_error@{compiler\_error}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_error()}{compiler\_error()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{const std\+::string \&}]{message }\end{DoxyParamCaption})}



Emits a general compiler error without location info. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em message} & Error message \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_aed582c4bba4b41805973cecc28813a78}\label{bytecode-builder_8cpp_aed582c4bba4b41805973cecc28813a78} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_error@{compiler\_error}}
\index{compiler\_error@{compiler\_error}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_error()}{compiler\_error()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{const \mbox{\hyperlink{structvia_1_1Token}{Token}} \&}]{token,  }\item[{const std\+::string \&}]{message }\end{DoxyParamCaption})}



Emits a compiler error associated with a specific token. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em token} & Token associated with the error \\
\hline
{\em message} & Error message \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_af27fc4468b84dff327faecf6c2b62095}\label{bytecode-builder_8cpp_af27fc4468b84dff327faecf6c2b62095} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_error@{compiler\_error}}
\index{compiler\_error@{compiler\_error}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_error()}{compiler\_error()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{size\+\_\+t}]{begin,  }\item[{size\+\_\+t}]{end,  }\item[{const std\+::string \&}]{message }\end{DoxyParamCaption})}



Emits a compiler error with a highlighted source range. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em begin} & Start offset of source \\
\hline
{\em end} & End offset of source \\
\hline
{\em message} & Error message \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_adb384520f2a54f15e7dcebc5f9885a44}\label{bytecode-builder_8cpp_adb384520f2a54f15e7dcebc5f9885a44} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_info@{compiler\_info}}
\index{compiler\_info@{compiler\_info}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_info()}{compiler\_info()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{const std\+::string \&}]{ }\end{DoxyParamCaption})}



Emits a general compiler info without location info. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em message} & Error info \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_aa5b5e4c9bbe912d67f4088ec6e237fc2}\label{bytecode-builder_8cpp_aa5b5e4c9bbe912d67f4088ec6e237fc2} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_info@{compiler\_info}}
\index{compiler\_info@{compiler\_info}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_info()}{compiler\_info()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{const \mbox{\hyperlink{structvia_1_1Token}{Token}} \&}]{,  }\item[{const std\+::string \&}]{ }\end{DoxyParamCaption})}



Emits a compiler info associated with a specific token. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em token} & Token associated with the info \\
\hline
{\em message} & Error message \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_a73fd43f361196186f7beec71629c8f1e}\label{bytecode-builder_8cpp_a73fd43f361196186f7beec71629c8f1e} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_info@{compiler\_info}}
\index{compiler\_info@{compiler\_info}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_info()}{compiler\_info()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{size\+\_\+t}]{begin,  }\item[{size\+\_\+t}]{end,  }\item[{const std\+::string \&}]{ }\end{DoxyParamCaption})}



Emits a compiler info with a highlighted source range. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em begin} & Start offset of source \\
\hline
{\em end} & End offset of source \\
\hline
{\em message} & Info message \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_ad6a1180fc963b94b13e5513905590593}\label{bytecode-builder_8cpp_ad6a1180fc963b94b13e5513905590593} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_output\_end@{compiler\_output\_end}}
\index{compiler\_output\_end@{compiler\_output\_end}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_output\_end()}{compiler\_output\_end()}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+output\+\_\+end (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx }\end{DoxyParamCaption})}



Signifies the end of compiler output. Currently does nothing. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_ae25646b0470fe311a93d2fae35030c51}\label{bytecode-builder_8cpp_ae25646b0470fe311a93d2fae35030c51} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_warning@{compiler\_warning}}
\index{compiler\_warning@{compiler\_warning}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_warning()}{compiler\_warning()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+warning (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{const std\+::string \&}]{ }\end{DoxyParamCaption})}



Emits a general compiler info without location info. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em message} & Info message \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_a3f6826ada44a96d6ca02aa999a66643a}\label{bytecode-builder_8cpp_a3f6826ada44a96d6ca02aa999a66643a} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_warning@{compiler\_warning}}
\index{compiler\_warning@{compiler\_warning}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_warning()}{compiler\_warning()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+warning (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{const \mbox{\hyperlink{structvia_1_1Token}{Token}} \&}]{,  }\item[{const std\+::string \&}]{ }\end{DoxyParamCaption})}



Emits a compiler warning associated with a specific token. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em token} & Token associated with the warning \\
\hline
{\em message} & Warning message \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_adf42809064fd8620bc70f1076d94f8b7}\label{bytecode-builder_8cpp_adf42809064fd8620bc70f1076d94f8b7} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!compiler\_warning@{compiler\_warning}}
\index{compiler\_warning@{compiler\_warning}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{compiler\_warning()}{compiler\_warning()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::compiler\+\_\+warning (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{size\+\_\+t}]{begin,  }\item[{size\+\_\+t}]{end,  }\item[{const std\+::string \&}]{ }\end{DoxyParamCaption})}



Emits a compiler warning with a highlighted source range. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em begin} & Start offset of source \\
\hline
{\em end} & End offset of source \\
\hline
{\em message} & Warning message \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_a405bea795e2517d90b3f2155bbb7610a}\label{bytecode-builder_8cpp_a405bea795e2517d90b3f2155bbb7610a} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!construct\_constant@{construct\_constant}}
\index{construct\_constant@{construct\_constant}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{construct\_constant()}{construct\_constant()}}
{\footnotesize\ttfamily Value via\+::compiler\+\_\+util\+::construct\+\_\+constant (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1LitExprNode}{Lit\+Expr\+Node}} \&}]{constant }\end{DoxyParamCaption})}



Constructs a constant value from the given literal expression node. 


\begin{DoxyParams}{Parameters}
{\em literal\+\_\+node} & The literal node of which the constant value is generated from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Interpreter value 
\end{DoxyReturn}
\Hypertarget{bytecode-builder_8cpp_ac9703f204266ee5ff6611665067a580c}\label{bytecode-builder_8cpp_ac9703f204266ee5ff6611665067a580c} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!fold\_constant@{fold\_constant}}
\index{fold\_constant@{fold\_constant}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{fold\_constant()}{fold\_constant()}}
{\footnotesize\ttfamily Lit\+Expr\+Node via\+::compiler\+\_\+util\+::fold\+\_\+constant (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{\mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}}]{constant,  }\item[{size\+\_\+t}]{fold\+\_\+depth = {\ttfamily 0} }\end{DoxyParamCaption})}



Folds an expression into a constant if possible. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em expr} & The expression to fold \\
\hline
{\em fold\+\_\+depth} & The maximum fold depth for symbolic expression \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Literal expression node 
\end{DoxyReturn}
\Hypertarget{bytecode-builder_8h_af77668addbda8eb247ec34282720901c}\label{bytecode-builder_8h_af77668addbda8eb247ec34282720901c} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!free\_register@{free\_register}}
\index{free\_register@{free\_register}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{free\_register()}{free\_register()}}
{\footnotesize\ttfamily void via\+::compiler\+\_\+util\+::free\+\_\+register (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{\mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}}}]{reg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Fress the given registers that was previously allocated with {\ttfamily alloc\+\_\+register} 

\begin{DoxySeeAlso}{See also}
alloc\+\_\+register 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em reg} & Register id \\
\hline
\end{DoxyParams}
\Hypertarget{bytecode-builder_8cpp_a8da7ee9839b6bf66721300862d71a126}\label{bytecode-builder_8cpp_a8da7ee9839b6bf66721300862d71a126} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!get\_current\_closure@{get\_current\_closure}}
\index{get\_current\_closure@{get\_current\_closure}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{get\_current\_closure()}{get\_current\_closure()}}
{\footnotesize\ttfamily Stack\+Function \& via\+::compiler\+\_\+util\+::get\+\_\+current\+\_\+closure (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx }\end{DoxyParamCaption})}



Returns the top-\/most closure on the function stack. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Reference to top-\/most closure on the stack. 
\end{DoxyReturn}
\Hypertarget{bytecode-builder_8cpp_a821ac9cae97689669d2c96e6d1411d28}\label{bytecode-builder_8cpp_a821ac9cae97689669d2c96e6d1411d28} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!push\_constant@{push\_constant}}
\index{push\_constant@{push\_constant}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{push\_constant()}{push\_constant()}}
{\footnotesize\ttfamily operand\+\_\+t via\+::compiler\+\_\+util\+::push\+\_\+constant (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{\mbox{\hyperlink{structvia_1_1Value}{Value}} \&\&}]{constant }\end{DoxyParamCaption})}



Pushes a constant onto the constant table. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em constant} & Constant to push onto the constant table \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Constant id 
\end{DoxyReturn}
\Hypertarget{bytecode-builder_8cpp_ae336781c36f310148a11623a10fd6761}\label{bytecode-builder_8cpp_ae336781c36f310148a11623a10fd6761} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!resolve\_lvalue@{resolve\_lvalue}}
\index{resolve\_lvalue@{resolve\_lvalue}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{resolve\_lvalue()}{resolve\_lvalue()}}
{\footnotesize\ttfamily bool via\+::compiler\+\_\+util\+::resolve\+\_\+lvalue (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{\mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}}]{lvalue,  }\item[{\mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}}}]{dst }\end{DoxyParamCaption})}



Resolves the given lvalue and loads the result into the given register. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em lvalue} & lvalue expression; Sym\+Expr\+Node, Index\+Expr\+Node, etc. \\
\hline
{\em dst} & Destination register \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Fail status 
\end{DoxyReturn}
\Hypertarget{bytecode-builder_8cpp_aa83c6cf545d9a79002c7088f35f7ec31}\label{bytecode-builder_8cpp_aa83c6cf545d9a79002c7088f35f7ec31} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!resolve\_rvalue@{resolve\_rvalue}}
\index{resolve\_rvalue@{resolve\_rvalue}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{resolve\_rvalue()}{resolve\_rvalue()}}
{\footnotesize\ttfamily bool via\+::compiler\+\_\+util\+::resolve\+\_\+rvalue (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classvia_1_1NodeVisitorBase}{Node\+Visitor\+Base}} \texorpdfstring{$\ast$}{*}}]{visitor,  }\item[{\mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}}]{rvalue,  }\item[{\mbox{\hyperlink{namespacevia_a90951ca238c08fe5449c13c9ed3cc38e}{operand\+\_\+t}}}]{dst }\end{DoxyParamCaption})}



Resolves the given rvalue and loads the result into the given register. 


\begin{DoxyParams}{Parameters}
{\em visitor} & Visitor object \\
\hline
{\em rvalue} & rvalue expression \\
\hline
{\em dst} & Destination register \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Fail status 
\end{DoxyReturn}
\Hypertarget{bytecode-builder_8cpp_add415b7aca65d8e5f933f440968a0533}\label{bytecode-builder_8cpp_add415b7aca65d8e5f933f440968a0533} 
\index{bytecode-\/builder.h@{bytecode-\/builder.h}!resolve\_type@{resolve\_type}}
\index{resolve\_type@{resolve\_type}!bytecode-\/builder.h@{bytecode-\/builder.h}}
\doxysubsubsection{\texorpdfstring{resolve\_type()}{resolve\_type()}}
{\footnotesize\ttfamily Type\+Node\+Base \texorpdfstring{$\ast$}{*} via\+::compiler\+\_\+util\+::resolve\+\_\+type (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvia_1_1VisitorContext}{Visitor\+Context}} \&}]{ctx,  }\item[{\mbox{\hyperlink{structvia_1_1ExprNodeBase}{Expr\+Node\+Base}} \texorpdfstring{$\ast$}{*}}]{expr }\end{DoxyParamCaption})}



Resolves the type of the given expression. 


\begin{DoxyParams}{Parameters}
{\em ctx} & Visitor context \\
\hline
{\em expr} & Expression to resolve type of \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Resolved type, current can hold the value of nullptr because the type system is incomplete 
\end{DoxyReturn}
